# ğŸŸ¢ Day11 TIL - 211013 ğŸŸ¢

â–¶ï¸ [TypeCasting](#ï¸-typecasting)

â–¶ï¸ [Stored Property](#ï¸-stored-property)

â–¶ï¸ [Computed Property](#ï¸-computed-property)

â–¶ï¸ [Property Observer](#ï¸-property-observer)


***

<br>

## âœ”ï¸ TypeCasting

* ì¸ìŠ¤í„´ìŠ¤ì˜ íƒ€ì…ì„ í™•ì¸ í•˜ê±°ë‚˜, í•´ë‹¹ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìŠˆí¼ í´ë˜ìŠ¤ë‚˜ ì„œë¸Œí´ë˜ìŠ¤ë¡œ ì·¨ê¸‰í•˜ëŠ” ë°©ë²•

* #### is

  > í‘œí˜„ì‹ is Type

  * íƒ€ì…ì„ í™•ì¸í•˜ëŠ” ì—°ì‚°ìë¡œ í‘œí˜„ì‹ì´ Typeê³¼ ë™ì¼í•œ íƒ€ì…ì´ê±°ë‚˜ **ì„œë¸Œí´ë˜ìŠ¤**ì¸ ê²½ìš° trueë¥¼ ë°˜í™˜

```swift
class Mobile {
    let name: String
    
    init(name: String) {
        self.name = name
    }
}
class AppleMobile: Mobile {
    var company = "ì• í”Œ"
}
class GoogleMobile: Mobile {
}

let mobile = Mobile(name: "PHONE")
let apple = AppleMobile(name: "iPHONE")
let google = GoogleMobile(name: "Galaxy")

mobile is Mobile // true
mobile is AppleMobile // false
mobile is GoogleMobile // false

apple is Mobile // true
apple is AppleMobile // true
apple is GoogleMobile //false
```

* #### as

  > **í‘œí˜„ì‹** **as** (**ë³€í™˜ í• **)Type
  >
  > **í‘œí˜„ì‹** **as**? (**ë³€í™˜ í• **)Type
  >
  > **í‘œí˜„ì‹** **as**! (**ë³€í™˜ í• **)Type

  * í‘œí˜„ì‹(ì˜ íƒ€ì…)ì´ ë³€í™˜í•  Typeê³¼ í˜¸í™˜ëœë‹¤ë©´, ë³€í™˜í•  Typeìœ¼ë¡œ ìºìŠ¤íŒ…ëœ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë¦¬í„´í•œë‹¤
  * ìƒì† ê´€ê³„ì¸ `Upcasting(ì„œë¸Œ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìŠˆí¼ í´ë˜ìŠ¤ì˜ íƒ€ì…ìœ¼ë¡œ ì°¸ì¡°)`ê³¼ `Downcasting(ìŠˆí¼ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì„œë¸Œ í´ë˜ìŠ¤ì˜ íƒ€ì…ìœ¼ë¡œ ì°¸ì¡°í•˜ëŠ” ê²ƒ)`ì—ì„œ ì‚¬ìš©í•œë‹¤
  * Anyì™€ AnyObject íƒ€ì…ì„ ì‚¬ìš©í•  ê²½ìš°, ìƒì† ê´€ê³„ê°€ ì•„ë‹ˆì–´ë„ ì˜ˆì™¸ì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤

```swift
let array: [Any] = [1, true, "ì•ˆë…•"]
let arrayInt = array as? [Int]  // nil
```

```swift
let iPhone1 = AppleMobile(name: "iPad") as Mobile // asë¥¼ ì‚¬ìš©í•œ ì—…ìºìŠ¤íŒ…
let iPhone2: Mobile = AppleMobile(name: "iPad") // íƒ€ì… ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•œ ì—…ìºìŠ¤íŒ…
iPhone.name	// iPad
iPhone.company // error

iPhone as? AppleMobile	// ë‹¤ìš´ìºìŠ¤íŒ…
(iPhone as? AppleMobile)?.company	// ì• í”Œ

if let value = iPhone as? AppleMobile { // if let ë°”ì¸ë”© êµ¬ë¬¸ê³¼ asë¥¼ ì´ìš©í•œ ë‹¤ìš´ìºìŠ¤íŒ…
    print("ì˜µì…”ë„ë°”ì¸ë”©, íƒ€ì…ìºìŠ¤íŒ… ì„±ê³µ!", value.company) //ì˜µì…”ë„ë°”ì¸ë”©, íƒ€ì…ìºìŠ¤íŒ… ì„±ê³µ! ì• í”Œ
}
```

[ì¶œì²˜](https://babbab2.tistory.com/127)

<br>

<br>

## âœ”ï¸ Stored Property

* ### Variable / Constant Stored Property

* #### Struct

  * Value Type -> **ì¸ìŠ¤í„´ìŠ¤ê°€ letìœ¼ë¡œ ì„ ì–¸**ë˜ë©´ **ëª¨ë“  í”„ë¡œí¼í‹°ê°€ letìœ¼ë¡œ ì„ ì–¸ëœ ê²ƒ ê°™ì´**ëœë‹¤

  ```swift
  struct DrinkStruct {
      let name: String	// ìƒìˆ˜ ì €ì¥ í”„ë¡œí¼í‹°
      var count: Int	// ë³€ìˆ˜ ì €ì¥ í”„ë¡œí¼í‹°
      var size: DrinkSize
  }
  
  let drinkStruct = DrinkStruct(name: "ì•„ë©”ë¦¬ì¹´ë…¸", count: 3, size: .tall)
  drinkStruct.count = 2 // error
  drinkStruct.size = .venti // error
  
  var drinkStruct = DrinkStruct(name: "ì•„ë©”ë¦¬ì¹´ë…¸", count: 3, size: .tall)
  drinkStruct.count = 2 // ì •ìƒ ì‘ë™
  drinkStruct.size = .venti // ì •ìƒ ì‘ë™
  ```

* #### Class

  * Reference Type -> ì›ë³¸ì— ë°”ë¡œ ì ‘ê·¼

  ```swift
  class DrinkClass {
      let name: String
      var count: Int
      var size: DrinkSize
      
      init(name: String, count: Int, size: DrinkSize) {
          self.name = name
          self.count = count
          self.size = size
      }
  }
  
  let drinkClass = DrinkClass(name: "ë¸”ë£¨ë² ë¦¬ìŠ¤ë¬´ë””", count: 2, size: .venti)
  drinkClass.count = 5
  drinkClass.size = .tall
  ```

  

* ### Lazy Stored Property

  * ì‹¤ì œë¡œ ê°’ì´ ì‚¬ìš©ë  ë•Œê¹Œì§€ ìƒì„±ì„ ì§€ì—°ì‹œí‚¤ëŠ” í”„ë¡œí¼í‹°

  * ì‚¬ìš©ì¡°ê±´

    > 1. ë°˜ë“œì‹œ varì™€ í•¨ê»˜ ì‚¬ìš©í•œë‹¤ : ì´ˆê¸°ì—ëŠ” ê°’ì´ ì¡´ì¬í•˜ì§€ ì•Šê³  ì´í›„ì— ê°’ì´ ìƒê¸°ëŠ” ê²ƒì´ê¸° ë•Œë¬¸
    > 2. structê³¼ classì—ì„œë§Œ ì‚¬ìš©
    > 3. ì—°ì‚° í”„ë¡œí¼í‹°ì—ì„œëŠ” ì‚¬ìš© ë¶ˆê°€ëŠ¥ : lazyëŠ” ì²˜ìŒ ì‚¬ìš©ë  ë•Œ ë©”ëª¨ë¦¬ì— ê°’ì„ ì˜¬ë¦¬ê³  ê·¸ ì´í›„ ë¶€í„°ëŠ” ë©”ëª¨ë¦¬ì— ì˜¬ë¼ì˜¨ ê°’ ì‚¬ìš©í•˜ëŠ”ë°, ì—°ì‚° í”„ë¡œí¼í‹°ëŠ” ì‚¬ìš©ë  ë•Œë§ˆë‹¤ ê°’ì„ ì—°ì‚°í•´ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸

    ```swift
    struct Poster {
        var image: UIImage = UIImage(systemName: "star") ?? UIImage()
        
        init() {
            print("Poster Initialized")
        }
    }
    
    struct MediaInfo {
        var mediaTitle: String
        var mediaRuntime: Int
        lazy var mediaPoster: Poster = Poster() // ì§€ì—° ì €ì¥ í”„ë¡œí¼í‹°
    }
    
    var media = MediaInfo(mediaTitle: "ì˜¤ì§•ì–´ê²Œì„", mediaRuntime: 333)
    print("1") // mediaPoster ì•„ì§ ìƒì„±ë˜ì§€ ì•ŠìŒ
    media.mediaPoster	// Poster Initialized
    print("2")
    ```

<br>

<br>

## âœ”ï¸ Computed Property

* ### Getter & Setter

  * set : ë§¤ê°œë³€ìˆ˜(newValue)ë¥¼ ê°™ì€ struct/class ë‚´ì˜ ì €ì¥ í”„ë¡œí¼í‹°ë¡œ ëŒ€ì…
  * get : setì—ì„œ ëŒ€ì…í•œ ì €ì¥ í”„ë¡œí¼í‹°ë¥¼ ì´ìš©í•´ ì—°ì‚°í•˜ê±°ë‚˜ ìµœì¢…ì ìœ¼ë¡œ ì–»ì–´ì ¸ì•¼(ë°˜í™˜)í•˜ëŠ” ê²ƒ
  
  <img src="../Screenshots/getset.png" height="80%" width="80%;" />

```swift
class BMI {
    typealias BMIValue = Double
 
  	var userName: String
    var userWeight: BMIValue
    var userHeight: BMIValue
      
    var BMIResult: String {
        get { 
            let bmiValue = (userWeight * userWeight) / userHeight
            let bmiStatus = bmiValue < 18.5 ? "ì €ì²´ì¤‘" : "ì •ìƒ ì´ìƒ"
            return "\(userName)ë‹˜ì˜ BMIì§€ìˆ˜ëŠ” \(bmiValue)ëŠ” \(bmiStatus)ì…ë‹ˆë‹¤"
        }
        set(nickname) {
            userName = nickname
        }
    }
    
    init(userName: String, userWeight: Double, userHeight: Double) {
        self.userName = userName
        self.userWeight = userWeight
        self.userHeight = userHeight
    }
}

let bmi = BMI(userName: "JACK", userWeight: 50, userHeight: 160)
print(bmi.BMIResult)	// JACKë‹˜ì˜ BMIì§€ìˆ˜ëŠ” 15.625ëŠ” ì €ì²´ì¤‘ì…ë‹ˆë‹¤
bmi.BMIResult = "MINSU"
print(bmi.BMIResult)	// HELLOë‹˜ì˜ BMIì§€ìˆ˜ëŠ” 15.625ëŠ” ì €ì²´ì¤‘ì…ë‹ˆë‹¤
```

<br>

<br>

## âœ”ï¸ Property Observer

* ### willSet & didSet

  * willSet : newValue
  * didSet : oldValue

```swift
class BMI {
    typealias BMIValue = Double
    
    var userName: String {
        willSet {
            print("ë‹‰ë„¤ì„ ë³€ê²½ ì˜ˆì •: \(userName) -> \(newValue)")
        }
        didSet {
            changeNameCount += 1
            print("ë‹‰ë„¤ì„ ë³€ê²½ ê²°ê³¼: \(oldValue) -> \(userName)")
        }
    }
    
    var changeNameCount = 0
    
    var userWeight: BMIValue
    var userHeight: BMIValue
    
    var BMIResult: String {
        get { 
            let bmiValue = (userWeight * userWeight) / userHeight
            let bmiStatus = bmiValue < 18.5 ? "ì €ì²´ì¤‘" : "ì •ìƒ ì´ìƒ"
            return "\(userName)ë‹˜ì˜ BMIì§€ìˆ˜ëŠ” \(bmiValue)ëŠ” \(bmiStatus)ì…ë‹ˆë‹¤"
        }
        set(nickname) {
            userName = nickname
        }
    }
    
    init(userName: String, userWeight: Double, userHeight: Double) {
        self.userName = userName
        self.userWeight = userWeight
        self.userHeight = userHeight
    }
}

bmi.BMIResult = "MINSU"	// ë‹‰ë„¤ì„ ë³€ê²½ ì˜ˆì •: JACK -> MINSU ë‹‰ë„¤ì„ ë³€ê²½ ê²°ê³¼: JACK -> MINSU
bmi.BMIResult = "JACKIE" // ë‹‰ë„¤ì„ ë³€ê²½ ì˜ˆì •: MINSU -> JACKIE ë‹‰ë„¤ì„ ë³€ê²½ ê²°ê³¼: MINSU -> JACKIE
bmi.BMIResult = "HELLO" // ë‹‰ë„¤ì„ ë³€ê²½ ì˜ˆì •: JACKIE -> HELLO ë‹‰ë„¤ì„ ë³€ê²½ ê²°ê³¼: JACKIE -> HELLO
print(bmi.BMIResult)	// HELLOë‹˜ì˜ BMIì§€ìˆ˜ëŠ” 15.625ëŠ” ì €ì²´ì¤‘ì…ë‹ˆë‹¤
print(bmi.changeNameCount)	// 3
```

* #### tableViewì—ì„œì˜ í™œìš©

  * listê°€ ë³€ê²½ë  ë•Œ ë§ˆë‹¤ `tableView.reloadData()` ë¥¼ ì‹¤í–‰

  ```swift
  class MemoTableViewController: UITableViewController {
  	
      var list: [String] = ["ì¥ ë³´ê¸°", "ë©”ëª¨ë©”ëª¨", "ì˜í™” ë³´ëŸ¬ ê°€ê¸°", "WWDC ì‹œì²­í•˜ê¸°"] {
          didSet {
              tableView.reloadData()	
          }
      }
  ```

  

<br><br>
