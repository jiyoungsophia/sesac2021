# ğŸŸ¢ Day25 TIL - 211102 ğŸŸ¢

â–¶ï¸ [Realm](#ï¸-realm)




***

<br>

## âœ”ï¸ Realm

* shemeì— ë§ê²Œ realm model(table)ì„ ì •ì˜í•´ì¤€ë‹¤

* ì´ë•Œ PKëŠ” ë³„ë„(String, Int)ë¡œ ì„¤ì •í•˜ê±°ë‚˜ UUID, ObjectIDë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤

```swift
// RealmModel.swift
class UserDiary: Object {
    @Persisted var diaryTitle: String // ì œëª©(í•„ìˆ˜)
    @Persisted var content: String? // ë‚´ìš©(ì˜µì…˜)
    @Persisted var writeDate = Date() // ì‘ì„±ë‚ ì§œ(í•„ìˆ˜)
    @Persisted var regDate = Date() // ë“±ë¡ì¼(ì˜µì…˜)
    @Persisted var favorite: Bool // ì¦ê²¨ì°¾ê¸° ê¸°ëŠ¥(í•„ìˆ˜)

    //PK(í•„ìˆ˜): Int, String, UUID, Object ID -> AutoIncrement
    @Persisted(primaryKey: true) var _id: ObjectId
    
    convenience init(diaryTitle: String, content: String?, writeDate: Date, regDate: Date) {
        self.init()
        self.diaryTitle = diaryTitle
        self.content = content
        self.writeDate = writeDate
        self.regDate = regDate
        self.favorite = false
    }
}
```

<br>

### CREATE

* Realm table ê²½ë¡œ(default.realm ìœ„ì¹˜)ì— ì ‘ê·¼í•œ í›„, ì €ì¥í•œë‹¤

```swift
// ë°ì´í„° ì €ì¥ì„ í•´ì•¼í•˜ëŠ” VC
let localRealm = try! Realm() // ê²½ë¡œ ì ‘ê·¼

// ë°ì´í„° ì €ì¥í•  func ì•ˆì—ì„œ
let task = UserDiary(diaryTitle: addTitle.text!, content: addTextView.text!, writeDate: Date(), regDate: Date())
        try! localRealm.write {
            localRealm.add(task)
        }
```

* Realm studioë¡œ ë°ì´í„° í™•ì¸í•˜ê¸°

```swift
print("Realm is located at: \(localRealm.configuration.fileURL!)")
```

<img src="../Screenshots/realmstudio.png" height="50%" width="50%;" />

<br>

### READ

* Realmì˜ ë°ì´í„°ë¥¼ ë‹´ì„ ë°°ì—´ì„ ì„ ì–¸ í›„, ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ”ë° ì´ë•Œ ì •ë ¬ì´ ë˜ì–´ìˆì§€ ì•Šìœ¼ë¯€ë¡œ filterë‚˜ sortedë¥¼ í†µí•´ ì •ë ¬í•´ì£¼ëŠ” ê²ƒì´ ì¢‹ë‹¤

```swift
let localRealm = try! Realm()
var tasks: Results<UserDiary>!

tasks = localRealm.objects(UserDiary.self).sorted(byKeyPath: "regDate", ascending: false)
```

<br>

<br>

